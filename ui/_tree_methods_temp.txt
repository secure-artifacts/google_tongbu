    def create_gdrive_tree_panel(self):
        """åˆ›å»º Google Drive æ–‡ä»¶å¤¹æ ‘é¢æ¿"""
        from PyQt6.QtWidgets import QWidget, QVBoxLayout, QGroupBox, QTreeWidget, QPushButton, QHBoxLayout
        
        panel = QWidget()
        layout = QVBoxLayout()
        panel.setLayout(layout)
        
        # æ ‡é¢˜
        group = QGroupBox("ğŸ“ Google Drive æ¥æº")
        group_layout = QVBoxLayout()
        
        # æ ‘å½¢æ§ä»¶
        self.gdrive_tree = QTreeWidget()
        self.gdrive_tree.setHeaderLabel("æ–‡ä»¶å¤¹ç»“æ„")
        self.gdrive_tree.itemExpanded.connect(self.on_tree_item_expanded)
        self.gdrive_tree.itemClicked.connect(self.on_tree_item_clicked)
        group_layout.addWidget(self.gdrive_tree)
        
        # æŒ‰é’®
        button_layout = QHBoxLayout()
        
        refresh_button = QPushButton("ğŸ”„ åˆ·æ–°")
        refresh_button.clicked.connect(self.load_gdrive_root)
        button_layout.addWidget(refresh_button)
        
        button_layout.addStretch()
        
        sync_all_button = QPushButton("âœ“ åŒæ­¥æ•´ä¸ªç½‘ç›˜")
        sync_all_button.clicked.connect(lambda: self.select_folder_from_tree_embedded("root", "æ•´ä¸ªç½‘ç›˜"))
        button_layout.addWidget(sync_all_button)
        
        group_layout.addLayout(button_layout)
        group.setLayout(group_layout)
        layout.addWidget(group)
        
        return panel
    
    def load_gdrive_root(self):
        """åŠ è½½ Google Drive æ ¹ç›®å½•"""
        if not self.rclone_wrapper:
            self.log("è¯·å…ˆæˆæƒ Rclone", "âš ")
            return
        
        from PyQt6.QtWidgets import QTreeWidgetItem
        from PyQt6.QtCore import Qt
        
        self.gdrive_tree.clear()
        self.log("æ­£åœ¨åŠ è½½ Google Drive...", "ğŸ“‚")
        
        # æ·»åŠ æ ¹èŠ‚ç‚¹
        root_item = QTreeWidgetItem(self.gdrive_tree)
        root_item.setText(0, "ğŸ“ æˆ‘çš„äº‘ç«¯ç¡¬ç›˜")
        root_item.setData(0, Qt.ItemDataRole.UserRole, {'id': 'root', 'name': 'æˆ‘çš„äº‘ç«¯ç¡¬ç›˜'})
        
        # åŠ è½½å­æ–‡ä»¶å¤¹
        self.load_subfolders_embedded(root_item, "root")
        root_item.setExpanded(True)
        
        self.log("âœ“ Google Drive åŠ è½½å®Œæˆ", "âœ“")
    
    def load_subfolders_embedded(self, parent_item, folder_id):
        """å»¶è¿ŸåŠ è½½å­æ–‡ä»¶å¤¹ï¼ˆåµŒå…¥å¼ç‰ˆæœ¬ï¼‰"""
        import subprocess
        from PyQt6.QtWidgets import QTreeWidgetItem
        from PyQt6.QtCore import Qt
        
        # æ„å»ºå‘½ä»¤
        cmd = [
            self.rclone_wrapper.rclone_path,
            "lsjson",
            "gdrive:",
            "--dirs-only",
            "--config", self.rclone_wrapper.config_path,
            "--max-depth", "1"
        ]
        
        if folder_id and folder_id != "root":
            cmd.extend(["--drive-root-folder-id", folder_id])
        
        try:
            result = subprocess.run(
                cmd,
                capture_output=True,
                encoding='utf-8',
                errors='ignore',
                timeout=15
            )
            
            if result.returncode == 0:
                import json
                folders = json.loads(result.stdout)
                
                for folder in folders:
                    folder_name = folder.get('Name', '')
                    folder_id_sub = folder.get('ID', '')
                    
                    # åˆ›å»ºå­èŠ‚ç‚¹
                    child_item = QTreeWidgetItem(parent_item)
                    child_item.setText(0, f"ğŸ“ {folder_name}")
                    child_item.setData(0, Qt.ItemDataRole.UserRole, {
                        'id': folder_id_sub,
                        'name': folder_name
                    })
                    
                    # æ·»åŠ å ä½ç¬¦
                    placeholder = QTreeWidgetItem(child_item)
                    placeholder.setText(0, "...")
                    
        except Exception as e:
            self.log(f"åŠ è½½å­æ–‡ä»¶å¤¹å¤±è´¥: {e}", "âš ")
    
    def on_tree_item_expanded(self, item):
        """å±•å¼€èŠ‚ç‚¹æ—¶åŠ è½½å­æ–‡ä»¶å¤¹ï¼ˆåµŒå…¥å¼ç‰ˆæœ¬ï¼‰"""
        from PyQt6.QtCore import Qt
        
        # æ£€æŸ¥æ˜¯å¦å·²åŠ è½½
        if item.childCount() == 1 and item.child(0).text(0) == "...":
            # åˆ é™¤å ä½ç¬¦
            item.takeChild(0)
            
            # åŠ è½½çœŸå®æ•°æ®
            data = item.data(0, Qt.ItemDataRole.UserRole)
            if data and isinstance(data, dict):
                folder_id = data['id']
                self.load_subfolders_embedded(item, folder_id)
    
    def on_tree_item_clicked(self, item, column):
        """ç‚¹å‡»æ ‘èŠ‚ç‚¹è‡ªåŠ¨é€‰æ‹©"""
        from PyQt6.QtCore import Qt
        
        data = item.data(0, Qt.ItemDataRole.UserRole)
        if data and isinstance(data, dict):
            folder_id = data['id']
            folder_name = data['name']
            self.select_folder_from_tree_embedded(folder_id, folder_name)
    
    def select_folder_from_tree_embedded(self, folder_id, folder_name):
        """ä»åµŒå…¥å¼æ ‘ä¸­é€‰æ‹©æ–‡ä»¶å¤¹"""
        # å­˜å‚¨é€‰æ‹©çš„æ–‡ä»¶å¤¹ID
        self.selected_gdrive_folder_id = folder_id
        self.selected_gdrive_folder_name = folder_name
        
        self.log(f"âœ“ å·²é€‰æ‹©æ¥æº: {folder_name}", "âœ“")
